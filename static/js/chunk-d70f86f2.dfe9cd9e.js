(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d70f86f2"],{"71e2":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n("b4fb");var r=n("b705"),a=n("b5c8"),c=n.n(a);function s(e){return e.code?i(e.code,e.message):e.statusCode?i(e.statusCode,e.message):e.message?Object(r["Message"])({type:"error",message:e.message}):Object(r["Message"])({type:"error",message:e}),!1}function i(e,t){c.a.Logging.getLogger("FrontEndError"),c.a.Logging.getLogger("FrontEndError").error("".concat(e,"--").concat(t)),console.error(e,t),r["Notification"].error({title:"错误:"+e,dangerouslyUseHTMLString:!0,duration:1e4,message:t})}},fd07:function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"project-screen-list"},[n("div",[n("div",{staticClass:"main-screen"},[n("div",{staticClass:"add-screen",on:{click:e.addBigScreen}},[n("el-card",{staticClass:"screen-card",attrs:{"body-style":{padding:"0px"}}},[n("div",{staticClass:"image"},[n("i",{staticClass:"el-icon-plus"})]),n("div",{staticClass:"bottom"},[n("span",{staticStyle:{"text-align":"center"}},[e._v("添加")])])])],1),e._l(e.bigScreenList,(function(t,r){return n("div",{key:r,staticClass:"screen-item"},[n("el-card",{staticClass:"screen-card",attrs:{"body-style":{padding:"0px"}}},[n("div",{staticClass:"screen-btns"},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(n){return e.goNavTo(t)}}}),n("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(n){return e.handleDelete(t)}}})],1),n("img",{staticClass:"image",attrs:{src:t.coverImage}}),n("div",{staticClass:"bottom"},[n("span",[e._v(e._s(t.title))])])])],1)}))],2)])])])},a=[],c=(n("4194"),n("6a61"),n("2e91")),s=n("b5c8"),i=n.n(s),o=n("71e2"),u={data:function(){return{bigScreenList:[],projectId:""}},mounted:function(){return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},methods:{getData:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=i.a.DataQueryBuilder.create(),r.setSortBy(["created desc"]),r.setWhereClause("project.objectId = '".concat(e,"'")),n.next=5,i.a.Data.of("LSE_BigScreen").find(r);case 5:a=n.sent,t.bigScreenList=a,console.log("bigScreenObjRes",a);case 8:case"end":return n.stop()}}),n)})))()},handleDelete:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=t,t.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){r.doDelete(e)})).catch((function(){t.$message({type:"info",message:"已取消删除"})}));case 2:case"end":return n.stop()}}),n)})))()},doDelete:function(e){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function n(){var r,a,c,s,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=i.a.DataQueryBuilder.create(),r.setWhereClause("bigScreen.objectId = '".concat(e.objectId,"'")),n.next=4,i.a.Data.of("LSE_Page").find(r);case 4:return a=n.sent,n.next=7,i.a.Data.of("LSE_Element").bulkDelete("page.objectId = '".concat(a[0].objectId,"'"));case 7:return c=n.sent,c.code&&Object(o["a"])(c),n.next=11,i.a.Data.of("LSE_Page").bulkDelete("objectId = '".concat(a[0].objectId,"'"));case 11:return s=n.sent,s.code&&Object(o["a"])(s),n.next=15,i.a.Data.of("LSE_BigScreen").bulkDelete("objectId = '".concat(e.objectId,"'"));case 15:u=n.sent,u.code&&Object(o["a"])(u),t.getData(t.projectId),t.$message.success("删除成功!");case 19:case"end":return n.stop()}}),n)})))()},goNavTo:function(e){this.$router.push({path:"/bigScreenEdit/edit",query:{id:e.objectId,projectId:this.projectId}})},addBigScreen:function(){this.$router.push({path:"/bigScreenEdit/edit"})}}},d=u,l=n("5d22"),g=Object(l["a"])(d,r,a,!1,null,null,null);t["default"]=g.exports}}]);